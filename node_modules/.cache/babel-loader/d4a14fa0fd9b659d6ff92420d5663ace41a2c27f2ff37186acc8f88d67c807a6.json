{"ast":null,"code":"var _jsxFileName = \"D:\\\\UKK\\\\frontend\\\\src\\\\Components\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const handleAuth = async event => {\n    event.preventDefault();\n    console.log(\"handleAuth called\", {\n      username,\n      password\n    });\n    try {\n      const response = await axios.post(\"http://localhost:8080/user/auth\", {\n        username,\n        password\n      });\n      const data = response.data;\n      if (data) {\n        // Store user data in session and local storage\n        sessionStorage.setItem(\"Token\", data.token);\n        sessionStorage.setItem(\"role\", data.data.role);\n        sessionStorage.setItem(\"id_user\", data.data.id_user);\n        localStorage.setItem(\"Data_user\", JSON.stringify(data.data));\n        sessionStorage.setItem('logged', true);\n\n        // Redirect based on user role\n        redirectUser(data.data.role);\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      toast.error(\"Login failed. Please check your credentials.\");\n    }\n  };\n  const redirectUser = role => {\n    switch (role) {\n      case \"admin\":\n        window.location.href = \"/admin\";\n        break;\n      case \"manajer\":\n        window.location.href = \"/manajer\";\n        break;\n      case \"kasir\":\n        window.location.href = \"/kasir\"; // Assuming there's a kasir route\n        break;\n      default:\n        toast.warn(\"Unknown role. Redirecting to home.\");\n        window.location.href = \"/\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleAuth,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"Lrw7JeD9zj6OUWhT/IH4OIvPKEk=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","axios","toast","jsxDEV","_jsxDEV","Login","_s","username","setUsername","password","setPassword","handleAuth","event","preventDefault","console","log","response","post","data","sessionStorage","setItem","token","role","id_user","localStorage","JSON","stringify","redirectUser","error","window","location","href","warn","onSubmit","children","type","value","onChange","e","target","required","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/UKK/frontend/src/Components/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleAuth = async (event) => {\r\n    event.preventDefault();\r\n    console.log(\"handleAuth called\", { username, password });\r\n\r\n    try {\r\n      const response = await axios.post(\"http://localhost:8080/user/auth\", {\r\n        username,\r\n        password,\r\n      });\r\n      const data = response.data;\r\n\r\n      if (data) {\r\n        // Store user data in session and local storage\r\n        sessionStorage.setItem(\"Token\", data.token);\r\n        sessionStorage.setItem(\"role\", data.data.role);\r\n        sessionStorage.setItem(\"id_user\", data.data.id_user);\r\n        localStorage.setItem(\"Data_user\", JSON.stringify(data.data));\r\n        sessionStorage.setItem('logged', true);\r\n\r\n        // Redirect based on user role\r\n        redirectUser (data.data.role);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Login error:\", error);\r\n      toast.error(\"Login failed. Please check your credentials.\");\r\n    }\r\n  };\r\n\r\n  const redirectUser  = (role) => {\r\n    switch (role) {\r\n      case \"admin\":\r\n        window.location.href = \"/admin\";\r\n        break;\r\n      case \"manajer\":\r\n        window.location.href = \"/manajer\";\r\n        break;\r\n      case \"kasir\":\r\n        window.location.href = \"/kasir\"; // Assuming there's a kasir route\r\n        break;\r\n      default:\r\n        toast.warn(\"Unknown role. Redirecting to home.\");\r\n        window.location.href = \"/\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleAuth}>\r\n      <div>\r\n        <label>\r\n          Username:\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            required\r\n          />\r\n        </label>\r\n      </div>\r\n      <div>\r\n        <label>\r\n          Password:\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n        </label>\r\n      </div>\r\n      <button type=\"submit\">Login</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}